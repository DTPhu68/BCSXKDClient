<!-- sidebar.component.html -->
<div class="sidebar" [ngClass]="{ collapsed: isCollapsed }">
  <div class="sidebar-header">
    <div class="logo-container">
      <img src="assets/images/logow.png" alt="Logo" class="logo-large" />
      <img src="assets/images/logow-small.png" alt="Logo" class="logo-small" />
    </div>
  </div>

  <div class="sidebar-user">
    <div class="user-info">
      <i class="fas fa-user fa-2x me-2 text-secondary"></i>
      <div class="user-details" *ngIf="!isCollapsed">
        <h6 class="mb-0">{{ userName }}</h6>
        <small *ngFor="let role of userRoles">
          {{ role }}
          <br />
        </small>
        <!-- <small>{{ userRoles }}</small> -->
      </div>
    </div>
  </div>

  <ul class="sidebar-nav">
    <li class="nav-item">
      <a
        routerLink="/"
        routerLinkActive="active"
        [routerLinkActiveOptions]="{ exact: true }"
        class="nav-link">
        <i class="fas fa-home"></i>
        <span *ngIf="!isCollapsed">Dashboard</span>
      </a>
    </li>

    <!--Khối cổ phần đường sắt -->
    <li class="nav-item">
      <a
        (click)="toggleSubmenu('cophan')"
        class="nav-link"
        [ngClass]="{ expanded: expandedMenu === 'cophan' }">
        <i class="fas fa-table"></i>
        <span *ngIf="!isCollapsed">CP Đường sắt</span>
        <i
          *ngIf="!isCollapsed"
          class="fas fa-chevron-right submenu-arrow"
          [ngClass]="{ rotated: expandedMenu === 'cophan' }"></i>
      </a>
      <ul class="submenu" [ngClass]="{ show: expandedMenu === 'cophan' }">
        <li>
          <a
            routerLink="/cophan"
            routerLinkActive="active">
            <i class="fas fa-clock"></i>
            <span *ngIf="!isCollapsed">Nhập liệu</span>
          </a>
        </li>
        <li>
          <a
            routerLink="/cpds/baocao"
            routerLinkActive="active"
            >
            <i class="fas fa-clipboard-check"></i>
            <span *ngIf="!isCollapsed">Báo cáo</span>
          </a>
        </li>        
      </ul>
    </li>

    <!-- Khối Công nghiệp-->
    <li class="nav-item">
      <a
        (click)="toggleSubmenu('congnghiep')"
        class="nav-link"
        [ngClass]="{ expanded: expandedMenu === 'congnghiep' }">
        <i class="fas fa-money-check-dollar"></i>
        <span *ngIf="!isCollapsed">Công nghiệp</span>
        <i
          *ngIf="!isCollapsed"
          class="fas fa-chevron-right submenu-arrow"
          [ngClass]="{ rotated: expandedMenu === 'congnghiep' }"></i>
      </a>
      <ul class="submenu" [ngClass]="{ show: expandedMenu === 'congnghiep' }">
        <li>
          <a
            routerLink="/congnghiep/nhaplieu"
            routerLinkActive="active"
            [routerLinkActiveOptions]="{ exact: false }"> 
            <i class="fas fa-arrows-split-up-and-left"></i>
            <span *ngIf="!isCollapsed">Nhập liệu</span>
          </a>
        </li>
        <li>
          <a
            routerLink="/congnghiep/baocao"
            routerLinkActive="active"
            [routerLinkActiveOptions]="{ exact: false }">
            <i class="fas fa-hand-holding-dollar"></i>
            <span *ngIf="!isCollapsed">Báo cáo</span>
          </a>
        </li>
      </ul>
    </li>
    <!--end-->

    <!-- Chi nhánh KT -->
    <li class="nav-item">
      <a
        (click)="toggleSubmenu('khaithac')"
        class="nav-link"
        [ngClass]="{ expanded: expandedMenu === 'khaithac' }">
        <i class="fas fa-money-bill-wave"></i>
        <span *ngIf="!isCollapsed">Khai thác</span>
        <i
          *ngIf="!isCollapsed"
          class="fas fa-chevron-right submenu-arrow"
          [ngClass]="{ rotated: expandedMenu === 'khaithac' }"></i>
      </a>
      <ul class="submenu" [ngClass]="{ show: expandedMenu === 'khaithac' }">
        <li>
          <a
            routerLink="/khaithac"
            routerLinkActive="active" >
            <i class="fas fa-calculator"></i>
            <span *ngIf="!isCollapsed">Nhập liệu</span>
          </a>
        </li>
        <li>
          <a
            routerLink="/khaithac/baocao"
            routerLinkActive="active"
            >
            <i class="fas fas fa-percentage"></i>
            <span *ngIf="!isCollapsed">Báo cáo</span>
          </a>
        </li>        
      </ul>
    </li>

    <!-- Đầu máy -->
    <li class="nav-item">
      <a
        (click)="toggleSubmenu('daumay')"
        class="nav-link"
        [ngClass]="{ expanded: expandedMenu === 'daumay' }">
        <i class="fas fa-tools"></i>
        <span *ngIf="!isCollapsed">Đầu máy</span>
        <i
          *ngIf="!isCollapsed"
          class="fas fa-chevron-right submenu-arrow"
          [ngClass]="{ rotated: expandedMenu === 'daumay' }"></i>
      </a>
      <ul class="submenu" [ngClass]="{ show: expandedMenu === 'daumay' }">
        <li>
          <a routerLink="/daumay" routerLinkActive="active">
            <!-- <i class="fas fa-users"></i> -->
            <i class="fas fa-user"></i>
            <span *ngIf="!isCollapsed">Nhập liệu</span>
          </a>
        </li>
        <li>
          <a routerLink="/daumay/baocao" routerLinkActive="active">
            <!-- <i class="fas fa-building"></i> -->
            <i class="fas fa-user-shield"></i>
            <span *ngIf="!isCollapsed">Báo cáo</span>
          </a>
        </li>        
      </ul>
    </li>
  </ul>

  <div class="sidebar-footer">
    <button class="btn btn-toggle" (click)="toggleSidebar()">
      <i class="fas" [ngClass]="isCollapsed ? 'fa-angle-right' : 'fa-angle-left'"></i>
    </button>
  </div>
</div>
